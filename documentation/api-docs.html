<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walk Suitability API - API Documentation</title>
    <link rel="stylesheet" href="https://unpkg.com/swagger-ui-dist@5.10.0/swagger-ui.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header h1 {
            margin: 0;
            font-size: 2.5rem;
            font-weight: 700;
        }

        .header p {
            margin: 0.5rem 0 0 0;
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .info-section {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 2rem;
        }

        .info-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .info-card h2 {
            color: #667eea;
            margin-top: 0;
            font-size: 1.5rem;
        }

        .info-card ul {
            line-height: 1.8;
        }

        .api-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .api-item {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            border-left: 4px solid #667eea;
        }

        .api-item h3 {
            margin: 0 0 0.5rem 0;
            color: #333;
            font-size: 1.1rem;
        }

        .api-item p {
            margin: 0;
            color: #666;
            font-size: 0.9rem;
        }

        .swagger-container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem 2rem 2rem;
        }

        #swagger-ui {
            border-radius: 8px;
            overflow: hidden;
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin: 1.5rem 0;
        }

        .feature-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
        }

        .feature-box h3 {
            margin: 0 0 0.5rem 0;
            font-size: 2rem;
        }

        .feature-box p {
            margin: 0;
            opacity: 0.9;
        }

        .alert {
            background: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 4px;
            padding: 1rem;
            margin: 1rem 0;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸš¶ Walk Suitability API</h1>
        <p>æ•£æ­¥é©åˆåº¦æŒ‡æ•° API - æ™ºèƒ½èåˆå¤©æ°”ä¸ç©ºæ°”è´¨é‡æ•°æ®</p>
    </div>

    <div class="info-section">
        <div class="info-card">
            <h2>ğŸ“– å…³äºæœ¬æœåŠ¡</h2>
            <p>
                Walk Suitability API æ˜¯ä¸€ä¸ªåˆ›æ–°çš„WebæœåŠ¡ï¼Œé€šè¿‡æ•´åˆå¤šä¸ªå…¬å…±APIçš„æ•°æ®ï¼Œ
                ä¸ºç”¨æˆ·æä¾›ç§‘å­¦ã€å…¨é¢çš„æ•£æ­¥å»ºè®®ã€‚æœ¬æœåŠ¡è°ƒç”¨ä¸¤ä¸ªå¼€æºçš„ç¬¬ä¸‰æ–¹APIï¼Œ
                å¹¶å°†æ•°æ®èåˆè®¡ç®—å‡ºç‹¬ç‰¹çš„"æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°"ã€‚
            </p>
        </div>

        <div class="info-card">
            <h2>ğŸ”Œ ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹API</h2>
            <div class="api-list">
                <div class="api-item">
                    <h3>ğŸŒ¤ï¸ OpenWeatherMap API</h3>
                    <p>æä¾›å®æ—¶å¤©æ°”æ•°æ®ï¼ŒåŒ…æ‹¬æ¸©åº¦ã€æ¹¿åº¦ã€é£é€Ÿã€å¤©æ°”çŠ¶å†µç­‰ä¿¡æ¯</p>
                    <p style="margin-top: 0.5rem;"><strong>å®˜ç½‘:</strong> <a href="https://openweathermap.org/api" target="_blank">openweathermap.org</a></p>
                </div>
                <div class="api-item">
                    <h3>ğŸ’¨ World Air Quality Index API</h3>
                    <p>æä¾›å…¨çƒåŸå¸‚çš„ç©ºæ°”è´¨é‡æŒ‡æ•°(AQI)ã€PM2.5ã€PM10ç­‰æ±¡æŸ“ç‰©æ•°æ®</p>
                    <p style="margin-top: 0.5rem;"><strong>å®˜ç½‘:</strong> <a href="https://aqicn.org/api/" target="_blank">aqicn.org</a></p>
                </div>
            </div>
        </div>

        <div class="info-card">
            <h2>âœ¨ æ•°æ®èåˆæ–¹æ³•</h2>
            <p>æœ¬æœåŠ¡é€šè¿‡ä»¥ä¸‹åˆ›æ–°ç®—æ³•èåˆä¸¤ä¸ªAPIçš„æ•°æ®ï¼š</p>
            <div class="feature-grid">
                <div class="feature-box">
                    <h3>25%</h3>
                    <p>æ¸©åº¦æƒé‡</p>
                </div>
                <div class="feature-box">
                    <h3>25%</h3>
                    <p>å¤©æ°”çŠ¶å†µæƒé‡</p>
                </div>
                <div class="feature-box">
                    <h3>30%</h3>
                    <p>ç©ºæ°”è´¨é‡æƒé‡</p>
                </div>
                <div class="feature-box">
                    <h3>20%</h3>
                    <p>æ¹¿åº¦+é£é€Ÿæƒé‡</p>
                </div>
            </div>
            <ul>
                <li><strong>æ¸©åº¦è¯„ä¼°:</strong> æœ€ä½³æ¸©åº¦èŒƒå›´15-25Â°Cï¼Œåç¦»æ­¤èŒƒå›´ä¼šé™ä½è¯„åˆ†</li>
                <li><strong>å¤©æ°”çŠ¶å†µ:</strong> æ™´å¤©å’Œå¤šäº‘æœ€ä½³ï¼Œé›¨é›ªå¤©æ°”ä¼šæ˜¾è‘—é™ä½è¯„åˆ†</li>
                <li><strong>ç©ºæ°”è´¨é‡:</strong> æ ¹æ®AQIæŒ‡æ•°è¯„ä¼°ï¼Œæ±¡æŸ“ä¸¥é‡æ—¶å¼ºçƒˆå½±å“è¯„åˆ†</li>
                <li><strong>æ¹¿åº¦ä¸é£é€Ÿ:</strong> è€ƒè™‘äººä½“èˆ’é€‚åº¦ï¼Œè¿‡é«˜æˆ–è¿‡ä½éƒ½ä¼šå½±å“è¯„åˆ†</li>
                <li><strong>ç»¼åˆè¯„åˆ†:</strong> åŠ æƒå¹³å‡è®¡ç®—æœ€ç»ˆçš„æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°(0-100åˆ†)</li>
            </ul>
        </div>

        <div class="info-card">
            <h2>ğŸ¯ ä¸»è¦åŠŸèƒ½</h2>
            <ul>
                <li><strong>GET /api/walk-suitability:</strong> è·å–ç»¼åˆæ•£æ­¥é€‚åˆåº¦æŒ‡æ•°ï¼ˆèåˆå¤©æ°”+ç©ºæ°”è´¨é‡ï¼‰</li>
                <li><strong>GET /api/weather:</strong> è·å–åŸå¸‚å¤©æ°”æ•°æ®</li>
                <li><strong>GET /api/air-quality:</strong> è·å–åŸå¸‚ç©ºæ°”è´¨é‡æ•°æ®</li>
                <li><strong>GET /health:</strong> å¥åº·æ£€æŸ¥ç«¯ç‚¹</li>
            </ul>
        </div>

        <div class="info-card">
            <h2>ğŸ“Š è¯„åˆ†æ ‡å‡†</h2>
            <ul>
                <li><strong>80-100åˆ†:</strong> éå¸¸é€‚åˆæ•£æ­¥ - ç°åœ¨æ˜¯æ•£æ­¥çš„ç»ä½³æ—¶æœºï¼</li>
                <li><strong>60-79åˆ†:</strong> é€‚åˆæ•£æ­¥ - é€‚åˆæ•£æ­¥ï¼Œè¯·æ³¨æ„æŸäº›æƒ…å†µ</li>
                <li><strong>40-59åˆ†:</strong> ä¸€èˆ¬ - å¯ä»¥æ•£æ­¥ï¼Œä½†æ¡ä»¶ä¸æ˜¯å¾ˆç†æƒ³</li>
                <li><strong>0-39åˆ†:</strong> ä¸é€‚åˆ - å»ºè®®æ¨è¿Ÿæ•£æ­¥è®¡åˆ’</li>
            </ul>
        </div>

        <div class="alert">
            <strong>ğŸ’¡ æç¤º:</strong> å¦‚æœä¸‹æ–¹çš„Swagger UIæ— æ³•æ­£å¸¸åŠ è½½ï¼Œè¯·ä½¿ç”¨ç®€å•çš„HTTPæœåŠ¡å™¨æ‰“å¼€æ­¤æ–‡ä»¶ï¼š
            <br><code>python -m http.server 8080</code> ç„¶åè®¿é—® <code>http://localhost:8080/api-docs.html</code>
        </div>
    </div>

    <div class="swagger-container">
        <div id="swagger-ui"></div>
    </div>

    <script src="https://unpkg.com/swagger-ui-dist@5.10.0/swagger-ui-bundle.js"></script>
    <script src="https://unpkg.com/swagger-ui-dist@5.10.0/swagger-ui-standalone-preset.js"></script>
    <script>
        // OpenAPI è§„èŒƒå†…è”ç‰ˆæœ¬ï¼ˆé¿å…CORSé—®é¢˜ï¼‰
        const spec = {
  "openapi": "3.0.3",
  "info": {
    "title": "Walk Suitability API",
    "description": "æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°API - æ•´åˆå¤©æ°”å’Œç©ºæ°”è´¨é‡æ•°æ®ï¼Œä¸ºç”¨æˆ·æä¾›ç§‘å­¦çš„æ•£æ­¥å»ºè®®\n\næœ¬æœåŠ¡é€šè¿‡è°ƒç”¨ä»¥ä¸‹ä¸¤ä¸ªå…¬å…±APIï¼š\n- OpenWeatherMap API (å¤©æ°”æ•°æ®)\n- World Air Quality Index API (ç©ºæ°”è´¨é‡æ•°æ®)\n\nå¹¶å°†è¿™äº›æ•°æ®èåˆè®¡ç®—å‡ºä¸€ä¸ªç»¼åˆçš„\"æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°\"(0-100åˆ†)ã€‚\n",
    "version": "1.0.0",
    "contact": {
      "name": "API Support",
      "email": "support@walksuitability.com"
    }
  },
  "servers": [
    {
      "url": "http://localhost:5000",
      "description": "æœ¬åœ°å¼€å‘æœåŠ¡å™¨"
    }
  ],
  "tags": [
    {
      "name": "Walk Suitability",
      "description": "æ•£æ­¥é€‚åˆåº¦ç›¸å…³æ¥å£"
    },
    {
      "name": "Weather",
      "description": "å¤©æ°”æ•°æ®æ¥å£"
    },
    {
      "name": "Air Quality",
      "description": "ç©ºæ°”è´¨é‡æ•°æ®æ¥å£"
    },
    {
      "name": "System",
      "description": "ç³»ç»Ÿæ¥å£"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "tags": ["System"],
        "summary": "APIä¿¡æ¯",
        "description": "è·å–APIçš„åŸºæœ¬ä¿¡æ¯å’Œå¯ç”¨ç«¯ç‚¹",
        "responses": {
          "200": {
            "description": "æˆåŠŸè¿”å›APIä¿¡æ¯",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "service": {
                      "type": "string",
                      "example": "Walk Suitability API"
                    },
                    "version": {
                      "type": "string",
                      "example": "1.0.0"
                    },
                    "description": {
                      "type": "string"
                    },
                    "endpoints": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "tags": ["System"],
        "summary": "å¥åº·æ£€æŸ¥",
        "description": "æ£€æŸ¥APIæœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ",
        "responses": {
          "200": {
            "description": "æœåŠ¡æ­£å¸¸",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "string",
                      "example": "healthy"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/walk-suitability": {
      "get": {
        "tags": ["Walk Suitability"],
        "summary": "è·å–æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°",
        "description": "æ ¹æ®æŒ‡å®šåŸå¸‚çš„å¤©æ°”å’Œç©ºæ°”è´¨é‡æ•°æ®ï¼Œè®¡ç®—å¹¶è¿”å›æ•£æ­¥é€‚åˆåº¦æŒ‡æ•°ã€‚\n\nè¯„åˆ†æ ‡å‡†ï¼š\n- 80-100åˆ†ï¼šéå¸¸é€‚åˆæ•£æ­¥\n- 60-79åˆ†ï¼šé€‚åˆæ•£æ­¥\n- 40-59åˆ†ï¼šä¸€èˆ¬\n- 0-39åˆ†ï¼šä¸é€‚åˆæ•£æ­¥\n\nè®¡ç®—å› ç´ åŒ…æ‹¬ï¼š\n- æ¸©åº¦ (æƒé‡: 25%)\n- å¤©æ°”çŠ¶å†µ (æƒé‡: 25%)\n- ç©ºæ°”è´¨é‡ (æƒé‡: 30%)\n- æ¹¿åº¦ (æƒé‡: 10%)\n- é£é€Ÿ (æƒé‡: 10%)\n",
        "parameters": [
          {
            "name": "city",
            "in": "query",
            "description": "åŸå¸‚åç§°ï¼ˆè‹±æ–‡ï¼‰",
            "required": false,
            "schema": {
              "type": "string",
              "default": "Tokyo",
              "example": "Tokyo"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸè¿”å›æ•£æ­¥é€‚åˆåº¦æ•°æ®",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "city": {
                      "type": "string",
                      "example": "Tokyo"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "suitability": {
                      "type": "object",
                      "properties": {
                        "score": {
                          "type": "number",
                          "format": "float",
                          "description": "æ•£æ­¥é€‚åˆåº¦æŒ‡æ•° (0-100)",
                          "example": 85.5
                        },
                        "level": {
                          "type": "string",
                          "description": "é€‚åˆåº¦ç­‰çº§",
                          "enum": ["éå¸¸é€‚åˆ", "é€‚åˆ", "ä¸€èˆ¬", "ä¸é€‚åˆ"],
                          "example": "éå¸¸é€‚åˆ"
                        },
                        "recommendation": {
                          "type": "string",
                          "description": "æ•£æ­¥å»ºè®®",
                          "example": "ç°åœ¨æ˜¯æ•£æ­¥çš„ç»ä½³æ—¶æœºï¼"
                        },
                        "reasons": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          },
                          "description": "è¯„åˆ†åŸå› è¯´æ˜",
                          "example": ["å¤©æ°”å’Œç©ºæ°”è´¨é‡éƒ½å¾ˆå¥½"]
                        },
                        "details": {
                          "type": "object",
                          "properties": {
                            "temperature_score": {
                              "type": "number",
                              "example": 100.0
                            },
                            "weather_score": {
                              "type": "number",
                              "example": 100.0
                            },
                            "humidity_score": {
                              "type": "number",
                              "example": 80.0
                            },
                            "wind_score": {
                              "type": "number",
                              "example": 100.0
                            },
                            "aqi_score": {
                              "type": "number",
                              "example": 80.0
                            }
                          }
                        }
                      }
                    },
                    "weather": {
                      "$ref": "#/components/schemas/WeatherData"
                    },
                    "air_quality": {
                      "$ref": "#/components/schemas/AirQualityData"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "æœåŠ¡å™¨é”™è¯¯",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/weather": {
      "get": {
        "tags": ["Weather"],
        "summary": "è·å–å¤©æ°”æ•°æ®",
        "description": "ä»OpenWeatherMap APIè·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
        "parameters": [
          {
            "name": "city",
            "in": "query",
            "description": "åŸå¸‚åç§°ï¼ˆè‹±æ–‡ï¼‰",
            "required": false,
            "schema": {
              "type": "string",
              "default": "Tokyo",
              "example": "Tokyo"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸè¿”å›å¤©æ°”æ•°æ®",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "city": {
                      "type": "string",
                      "example": "Tokyo"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "data": {
                      "$ref": "#/components/schemas/WeatherData"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "æœåŠ¡å™¨é”™è¯¯",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    },
    "/api/air-quality": {
      "get": {
        "tags": ["Air Quality"],
        "summary": "è·å–ç©ºæ°”è´¨é‡æ•°æ®",
        "description": "ä»World Air Quality Index APIè·å–æŒ‡å®šåŸå¸‚çš„ç©ºæ°”è´¨é‡ä¿¡æ¯",
        "parameters": [
          {
            "name": "city",
            "in": "query",
            "description": "åŸå¸‚åç§°ï¼ˆè‹±æ–‡ï¼‰",
            "required": false,
            "schema": {
              "type": "string",
              "default": "Tokyo",
              "example": "Tokyo"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "æˆåŠŸè¿”å›ç©ºæ°”è´¨é‡æ•°æ®",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean",
                      "example": true
                    },
                    "city": {
                      "type": "string",
                      "example": "Tokyo"
                    },
                    "timestamp": {
                      "type": "string",
                      "format": "date-time"
                    },
                    "data": {
                      "$ref": "#/components/schemas/AirQualityData"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "æœåŠ¡å™¨é”™è¯¯",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                }
              }
            }
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "WeatherData": {
        "type": "object",
        "description": "å¤©æ°”æ•°æ®å¯¹è±¡",
        "properties": {
          "temperature": {
            "type": "number",
            "format": "float",
            "description": "æ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰",
            "example": 22.5
          },
          "feels_like": {
            "type": "number",
            "format": "float",
            "description": "ä½“æ„Ÿæ¸©åº¦ï¼ˆæ‘„æ°åº¦ï¼‰",
            "example": 21.8
          },
          "humidity": {
            "type": "integer",
            "description": "æ¹¿åº¦ï¼ˆç™¾åˆ†æ¯”ï¼‰",
            "example": 65
          },
          "weather": {
            "type": "string",
            "description": "å¤©æ°”çŠ¶å†µ",
            "example": "Clear"
          },
          "weather_description": {
            "type": "string",
            "description": "å¤©æ°”è¯¦ç»†æè¿°",
            "example": "clear sky"
          },
          "wind_speed": {
            "type": "number",
            "format": "float",
            "description": "é£é€Ÿï¼ˆç±³/ç§’ï¼‰",
            "example": 3.5
          },
          "clouds": {
            "type": "integer",
            "description": "äº‘é‡ï¼ˆç™¾åˆ†æ¯”ï¼‰",
            "example": 20
          }
        }
      },
      "AirQualityData": {
        "type": "object",
        "description": "ç©ºæ°”è´¨é‡æ•°æ®å¯¹è±¡",
        "properties": {
          "aqi": {
            "type": "integer",
            "description": "ç©ºæ°”è´¨é‡æŒ‡æ•° (AQI)",
            "example": 45
          },
          "pm25": {
            "type": "number",
            "format": "float",
            "description": "PM2.5æµ“åº¦",
            "nullable": true,
            "example": 12.5
          },
          "pm10": {
            "type": "number",
            "format": "float",
            "description": "PM10æµ“åº¦",
            "nullable": true,
            "example": 25.3
          },
          "o3": {
            "type": "number",
            "format": "float",
            "description": "è‡­æ°§æµ“åº¦",
            "nullable": true,
            "example": 30.2
          },
          "no2": {
            "type": "number",
            "format": "float",
            "description": "äºŒæ°§åŒ–æ°®æµ“åº¦",
            "nullable": true,
            "example": 15.8
          }
        }
      },
      "Error": {
        "type": "object",
        "properties": {
          "success": {
            "type": "boolean",
            "example": false
          },
          "error": {
            "type": "string",
            "description": "é”™è¯¯ä¿¡æ¯",
            "example": "å¤©æ°”æ•°æ®è·å–å¤±è´¥"
          }
        }
      }
    }
  }
};

        window.onload = function() {
            // ä½¿ç”¨å†…è”çš„ OpenAPI è§„èŒƒ
            window.ui = SwaggerUIBundle({
                spec: spec,
                dom_id: '#swagger-ui',
                deepLinking: true,
                presets: [
                    SwaggerUIBundle.presets.apis,
                    SwaggerUIStandalonePreset
                ],
                plugins: [
                    SwaggerUIBundle.plugins.DownloadUrl
                ],
                layout: "StandaloneLayout",
                defaultModelsExpandDepth: 1,
                defaultModelExpandDepth: 1,
                docExpansion: 'list',
                tryItOutEnabled: true,
                displayRequestDuration: true,
                filter: true,
                syntaxHighlight: {
                    activate: true,
                    theme: "monokai"
                }
            });
        };
    </script>
</body>
</html>
